<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduSync - Gesti贸n de Materias</title>
    <link rel="stylesheet" href="../styles/base.css">
    <link rel="stylesheet" href="../styles/app.css">
    <link rel="stylesheet" href="../styles/components.css">
    <link rel="stylesheet" href="../styles/responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <!-- Mobile Navigation Overlay -->
    <div id="navOverlay" class="nav-overlay">
        <div class="nav-content">
            <div class="nav-header">
                <h2>EduSync</h2>
                <button id="closeNav" class="close-nav">&times;</button>
            </div>
            <nav class="mobile-nav">
                <a href="#dashboard" class="nav-item" data-section="dashboard">
                    <i class="fas fa-home"></i>
                    <span data-translate="dashboard">Panel de Control</span>
                </a>
                <a href="#student-management" class="nav-item" data-section="student-management">
                    <i class="fas fa-users"></i>
                    <span data-translate="student_management">Gesti贸n de Estudiantes</span>
                </a>
                <a href="#subjects-management" class="nav-item active" data-section="subjects-management">
                    <i class="fas fa-book"></i>
                    <span data-translate="subjects_management">Gesti贸n de Materias</span>
                </a>
                <a href="#notifications" class="nav-item" data-section="notifications">
                    <i class="fas fa-bell"></i>
                    <span data-translate="notifications">Notificaciones</span>
                    <span class="notification-badge" id="notificationCount">0</span>
                </a>
                <a href="#reports" class="nav-item" data-section="reports">
                    <i class="fas fa-chart-bar"></i>
                    <span data-translate="reports">Reportes</span>
                </a>
                
                <!-- Language Selector in Navigation -->
                <div class="nav-language-selector">
                    <div class="nav-language-label">
                        <i class="fas fa-globe"></i>
                        <span data-translate="language">Idioma</span>
                    </div>
                    <select id="languageSelect" class="nav-language-dropdown">
                        <option value="es">Espa帽ol</option>
                        <option value="en">English</option>
                    </select>
                </div>
            </nav>
        </div>
    </div>

    <!-- Desktop Navigation Header -->
    <header class="landing-header desktop-nav">
        <nav class="landing-nav">
            <div class="nav-brand">
                <i class="fas fa-graduation-cap"></i>
                <span>EduSync</span>
            </div>
            <div class="nav-menu" id="desktopNavMenu">
                <a href="#dashboard" class="nav-link" data-section="dashboard">
                    <span data-translate="dashboard">Panel de Control</span>
                </a>
                <div class="nav-dropdown">
                    <a href="#student-management" class="nav-link dropdown-toggle" data-section="student-management">
                        <span data-translate="student_management">Gesti贸n de Estudiantes</span>
                        <i class="fas fa-chevron-down"></i>
                    </a>
                    <div class="dropdown-menu">
                        <a href="#student-management" class="dropdown-item" data-section="student-management" data-subsection="students">
                            <i class="fas fa-users"></i>
                            <span data-translate="students">Estudiantes</span>
                        </a>
                        <a href="#student-management" class="dropdown-item" data-section="student-management" data-subsection="exams">
                            <i class="fas fa-file-alt"></i>
                            <span data-translate="exams">Ex谩menes</span>
                        </a>
                    </div>
                </div>
                <div class="nav-dropdown">
                    <a href="#subjects-management" class="nav-link dropdown-toggle active" data-section="subjects-management">
                        <span data-translate="subjects_management">Gesti贸n de Materias</span>
                        <i class="fas fa-chevron-down"></i>
                    </a>
                    <div class="dropdown-menu">
                        <a href="#subjects-management" class="dropdown-item" data-section="subjects-management" data-subsection="subjects">
                            <i class="fas fa-book"></i>
                            <span data-translate="subjects">Materias</span>
                        </a>
                        <a href="#subjects-management" class="dropdown-item" data-section="subjects-management" data-subsection="content">
                            <i class="fas fa-list"></i>
                            <span data-translate="content">Contenido</span>
                        </a>
                    </div>
                </div>
                <a href="#reports" class="nav-link" data-section="reports">
                    <span data-translate="reports">Reportes</span>
                </a>
                <a href="#notifications" class="nav-link notifications-icon" data-section="notifications" title="Notificaciones">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge" id="desktopNotificationCount">0</span>
                </a>
                <div class="language-selector">
                    <button id="desktopLanguageToggle" class="language-toggle">
                        <i class="fas fa-globe"></i>
                        <span id="languageCode">ES</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div id="languageDropdown" class="language-dropdown-menu">
                        <div class="language-option" data-lang="es">
                            <span class="language-flag"></span>
                            <span class="language-name">Espa帽ol</span>
                        </div>
                        <div class="language-option" data-lang="en">
                            <span class="language-flag">吼</span>
                            <span class="language-name">English</span>
                        </div>
                    </div>
                    <select id="desktopLanguageSelect" class="language-dropdown" style="display: none;">
                        <option value="es">Espa帽ol</option>
                        <option value="en">English</option>
                    </select>
                </div>
                <div class="user-info">
                    <button id="desktopLogoutBtn" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
            <div class="nav-toggle" id="desktopNavToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <div class="app-container">
        <!-- Mobile Header -->
        <header class="app-header mobile-header">
            <div class="header-left">
                <button id="menuToggle" class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
                <h1>EduSync</h1>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <span id="welcomeUser" data-translate="welcome_user">隆Bienvenido, Usuario!</span>
                    <button id="logoutBtn" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Subjects Management Section -->
            <section id="subjects-management" class="content-section active">
                <div class="section-header">
                    <h2 data-translate="subjects_management">Gesti贸n de Materias</h2>
                    <div class="section-actions">
                        <div class="filters">
                            <select id="courseFilter" class="filter-select">
                                <option value="" data-translate="all_courses">Todos los Cursos</option>
                                <option value="9th" data-translate="9th_course">9潞 Curso</option>
                                <option value="10th" data-translate="10th_course">10潞 Curso</option>
                                <option value="11th" data-translate="11th_course">11潞 Curso</option>
                                <option value="12th" data-translate="12th_course">12潞 Curso</option>
                            </select>
                            <select id="statusFilter" class="filter-select">
                                <option value="" data-translate="all_status">Todos los Estados</option>
                                <option value="ACTIVA" data-translate="active">Activa</option>
                                <option value="INACTIVA" data-translate="inactive">Inactiva</option>
                                <option value="FINALIZADA" data-translate="finished">Finalizada</option>
                            </select>
                        </div>
                        <div class="view-toggle">
                            <button id="subjectsGridViewBtn" class="view-btn" data-view="grid">
                                <i class="fas fa-th"></i>
                            </button>
                            <button id="subjectsListViewBtn" class="view-btn active" data-view="list">
                                <i class="fas fa-list"></i>
                            </button>
                        </div>
                        <div class="action-buttons">
                            <button id="addSubjectBtn" class="btn-primary">
                                <i class="fas fa-plus"></i>
                                <span data-translate="add_subject">Agregar Materia</span>
                            </button>
                            <button id="closeGradesBtn" class="btn-secondary">
                                <i class="fas fa-clipboard-check"></i>
                                <span data-translate="close_grades">Cierre de Notas</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Mobile Tab Navigation -->
                <div class="tab-navigation mobile-only">
                    <button id="subjectsTab" class="tab-btn active" data-tab="subjects">
                        <i class="fas fa-book"></i>
                        <span data-translate="subjects">Materias</span>
                    </button>
                    <button id="contentTab" class="tab-btn" data-tab="content">
                        <i class="fas fa-list"></i>
                        <span data-translate="content">Contenido</span>
                    </button>
                </div>

                <!-- Subjects Tab Content -->
                <div id="subjectsTabContent" class="tab-content active">
                    <!-- Subject Overview Cards -->
                    <div class="subjects-cards" id="subjectsCards" style="display: none;">
                        <!-- Subject cards will be loaded dynamically -->
                    </div>

                    <!-- Detailed List View -->
                    <div class="subjects-list" id="subjectsList">
                        <!-- Detailed subject information will be loaded dynamically -->
                    </div>

                    <!-- Subject Themes Panel (similar to student detail panel) -->
                    <div class="subject-detail-panel" id="subjectThemesPanel" style="display: none;">
                        <div class="panel-header">
                            <h3 id="selectedSubjectName">Nombre de la Materia</h3>
                            <button id="closeSubjectThemesPanel" class="btn-icon" onclick="closeSubjectThemesPanel()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="panel-content">
                            <div style="padding: 15px 0;">
                                <div id="subjectThemesList" style="max-height: 500px; overflow-y: auto;">
                                    <!-- Temas will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Content Tab Content -->
                <div id="contentTabContent" class="tab-content">
                    <div class="content-view-controls">
                        <div class="view-toggle">
                            <button id="contentGridViewBtn" class="view-btn" data-view="grid">
                                <i class="fas fa-th"></i>
                            </button>
                            <button id="contentListViewBtn" class="view-btn active" data-view="list">
                                <i class="fas fa-list"></i>
                            </button>
                        </div>
                        <div class="action-buttons">
                            <button id="addContentBtn" class="btn-primary">
                                <i class="fas fa-plus"></i>
                                <span data-translate="add_content">Agregar Contenido</span>
                            </button>
                        </div>
                    </div>
                    <div class="content-container" id="contentContainer" style="display: none;">
                        <!-- Content will be loaded dynamically -->
                    </div>
                    <div class="content-list" id="contentList">
                        <!-- Content list view will be loaded dynamically -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Subject Modal -->
    <div id="subjectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-translate="add_edit_subject">Agregar/Editar Materia</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="subjectForm" class="modal-form">
                <div class="form-group">
                    <label for="subjectName" data-translate="subject_name">Nombre de la Materia</label>
                    <input type="text" id="subjectName" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="subjectCourse" data-translate="course">Curso</label>
                        <select id="subjectCourse" required>
                            <option value="" data-translate="select_course">- Seleccionar Curso -</option>
                            <option value="1">1潞 Curso</option>
                            <option value="2">2潞 Curso</option>
                            <option value="3">3潞 Curso</option>
                            <option value="4">4潞 Curso</option>
                            <option value="5">5潞 Curso</option>
                            <option value="6">6潞 Curso</option>
                            <option value="7">7潞 Curso</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="subjectDivision" data-translate="division">Divisi贸n</label>
                        <select id="subjectDivision" required>
                            <option value="" data-translate="select_division">- Seleccionar Divisi贸n -</option>
                            <option value="A">Divisi贸n A</option>
                            <option value="B">Divisi贸n B</option>
                            <option value="C">Divisi贸n C</option>
                            <option value="D">Divisi贸n D</option>
                            <option value="E">Divisi贸n E</option>
                            <option value="F">Divisi贸n F</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="subjectDescription" data-translate="description">Descripci贸n</label>
                    <textarea id="subjectDescription" rows="3" placeholder="Descripci贸n de la materia..."></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="subjectSchedule" data-translate="schedule">Horario</label>
                        <input type="text" id="subjectSchedule" placeholder="Ej: Lunes y Mi茅rcoles 10:00-12:00">
                    </div>
                    <div class="form-group">
                        <label for="subjectClassroom" data-translate="classroom">Aula</label>
                        <input type="number" id="subjectClassroom" placeholder="Ej: 101" min="1" step="1">
                    </div>
                </div>
                <div class="form-group">
                    <label for="subjectStatus" data-translate="status">Estado</label>
                    <select id="subjectStatus">
                        <option value="ACTIVA" data-translate="active">Activa</option>
                        <option value="INACTIVA" data-translate="inactive">Inactiva</option>
                        <option value="FINALIZADA" data-translate="finished">Finalizada</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary close-modal" data-translate="cancel">Cancelar</button>
                    <button type="submit" class="btn-primary" data-translate="save_subject">Guardar Materia</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Content Modal -->
    <div id="contentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-translate="add_edit_content">Agregar/Editar Contenido</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="contentForm" class="modal-form">
                <div class="form-group">
                    <label for="contentSubject" data-translate="subject">Materia</label>
                    <select id="contentSubject" required>
                        <option value="" data-translate="select_subject">- Seleccionar Materia -</option>
                        <!-- Options will be populated dynamically -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="contentTopic" data-translate="topic">Tema</label>
                    <input type="text" id="contentTopic" required>
                </div>
                <div class="form-group">
                    <label for="contentDescription" data-translate="description">Descripci贸n</label>
                    <textarea id="contentDescription" rows="3" placeholder="Descripci贸n del tema..."></textarea>
                </div>
                <div class="form-group">
                    <label for="contentStatus" data-translate="status">Estado</label>
                    <select id="contentStatus">
                        <option value="PENDIENTE" data-translate="pending">Pendiente</option>
                        <option value="EN_PROGRESO" data-translate="in_progress">En Progreso</option>
                        <option value="COMPLETADO" data-translate="completed">Completado</option>
                        <option value="CANCELADO" data-translate="cancelled">Cancelado</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary close-modal" data-translate="cancel">Cancelar</button>
                    <button type="submit" class="btn-primary" data-translate="save_content">Guardar Contenido</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Script Modules -->
    <script src="../scripts/translations.js"></script>
    <script src="../scripts/utils.js"></script>
    <script src="../scripts/navigation.js"></script>
    <script src="../scripts/auth.js"></script>
    <script src="../scripts/dashboard.js"></script>
    <!-- Student Management Modules (Load in order) -->
    <script src="../scripts/students/state.js"></script>
    <script src="../scripts/students/course-selector.js"></script>
    <script src="../scripts/students/subject-selector.js"></script>
    <script src="../scripts/students/topic-selector.js"></script>
    <script src="../scripts/students/intensificacion.js"></script>
    <script src="../scripts/students/crud.js"></script>
    <script src="../scripts/students/form.js"></script>
    <script src="../scripts/students/modals.js"></script>
    <script src="../scripts/students/index.js"></script>
    <script src="../scripts/students.js"></script>
    <!-- Load subjects utility modules, then schedule and CRUD modules before subjects.js -->
    <script src="../scripts/subjects/utils/state.js"></script>
    <script src="../scripts/subjects/utils/helpers.js"></script>
    <script src="../scripts/subjects/utils/course-dropdown.js"></script>
    <script src="../scripts/subjects/schedule.js"></script>
    <script src="../scripts/subjects/subject-crud.js"></script>
    <script src="../scripts/subjects.js"></script>
    <script src="../scripts/grades.js"></script>
    <script src="../scripts/attendance.js"></script>
    <script src="../scripts/exams.js"></script>
    <script src="../scripts/notifications.js"></script>
    <script src="../scripts/reports.js"></script>
    <script src="../scripts/subscription.js"></script>
    <script src="../scripts/main.js"></script>
</body>
</html>
